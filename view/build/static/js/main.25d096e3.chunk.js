(this["webpackJsonpmovie-searcher"]=this["webpackJsonpmovie-searcher"]||[]).push([[0],{122:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(9),l=t.n(c),o=(t(96),t(97),t(17)),i=t.n(o),s=t(24),m=t(16),u=t(34),p=t.n(u),d=p.a.create({baseURL:"https://movie-tracker-users.herokuapp.com/"}),b=Object(n.createContext)(),f=Object(n.createContext)(),v=function(e){var a=Object(n.useContext)(b),t=a.user,c=a.autenticated,l=Object(n.useState)(null),o=Object(m.a)(l,2),u=o[0],v=o[1],h=Object(n.useState)(null),E=Object(m.a)(h,2),g=E[0],O=E[1],y=Object(n.useState)([]),j=Object(m.a)(y,2),w=j[0],x=j[1],k=Object(n.useState)([]),S=Object(m.a)(k,2),R=S[0],C=S[1],I=Object(n.useState)({title:"",type:""}),N=Object(m.a)(I,2),T=N[0],G=N[1],D=Object(n.useState)(!1),W=Object(m.a)(D,2),U=W[0],M=W[1],_=T.title,L=T.type;if(t)var F=t._id;return Object(n.useEffect)((function(){var e;c&&t&&function(){var a=Object(s.a)(i.a.mark((function a(){var t,n,r,c,l;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return O(!0),a.prev=1,a.next=4,d.get("/api/users",{params:{id:F}});case 4:t=a.sent,n=t.data.favMovies,c=[],l=0;case 8:if(!(l<n.length)){a.next=17;break}return e="https://www.omdbapi.com/?apikey=a2c11b79&i=".concat(n[l]),a.next=12,p.a.get(e);case 12:r=a.sent,c.push(r.data);case 14:l++,a.next=8;break;case 17:setTimeout((function(){x(c),O(!1)}),3e3),a.next=23;break;case 20:a.prev=20,a.t0=a.catch(1),console.log(a.t0);case 23:case"end":return a.stop()}}),a,null,[[1,20]])})));return function(){return a.apply(this,arguments)}}()();U&&function(){var a=Object(s.a)(i.a.mark((function a(){var t,n,r,c,l;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return v(!0),e="All"===L?"https://www.omdbapi.com/?apikey=a2c11b79&s=".concat(_):"https://www.omdbapi.com/?apikey=a2c11b79&s=".concat(_,"&type=").concat(L),a.next=4,p.a.get(e);case 4:t=a.sent,n=[],r=t.data.Search,c=0;case 8:if(!(c<r.length)){a.next=17;break}return e="https://www.omdbapi.com/?apikey=a2c11b79&i=".concat(r[c].imdbID),a.next=12,p.a.get(e);case 12:l=a.sent,n.push(l.data);case 14:c++,a.next=8;break;case 17:setTimeout((function(){C(n),v(!1)}),3e3);case 18:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()()}),[T,t]),r.a.createElement(f.Provider,{value:{movies:R,userMovies:w,spinner:u,spinnerFav:g,searchMovies:G,saveMovies:C,saveSearch:M,saveUserMovies:x}},e.children)},h=t(176),E=t(81),g=function(e){e?d.defaults.headers.common["x-auth-token"]=e:delete d.defaults.headers.common["x-auth-token"]},O=t(15),y=function(e,a){switch(a.type){case"REGISTERED":case"LOGIN_OK":return localStorage.setItem("token",a.payload.token),Object(O.a)(Object(O.a)({},e),{},{autenticated:!0,message:null,spinner:!1});case"GET_USER":return Object(O.a)(Object(O.a)({},e),{},{autenticated:!0,user:a.payload,spinner:!1});case"LOG_OUT":case"LOGIN_ERROR":case"REGISTER_ERROR":return localStorage.removeItem("token"),Object(O.a)(Object(O.a)({},e),{},{token:null,user:null,autenticated:!1,message:a.payload,spinner:!1});default:return e}},j=function(e){var a={token:localStorage.getItem("token"),autenticated:null,user:null,message:null,spinner:!0},t=Object(n.useReducer)(y,a),c=Object(m.a)(t,2),l=c[0],o=c[1],u=function(){var e=Object(s.a)(i.a.mark((function e(a){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.post("/api/users",a);case 3:t=e.sent,o({type:"REGISTERED",payload:t.data}),p(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),n={msg:e.t0.response.data.msg,cat:"alert"},o({type:"REGISTER_ERROR",payload:n});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}(),p=function(){var e=Object(s.a)(i.a.mark((function e(){var a,t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=localStorage.getItem("token"))&&g(a),e.prev=2,e.next=5,d.get("/api/auth");case 5:t=e.sent,o({type:"GET_USER",payload:t.data.user}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o({type:"LOGIN_ERROR"});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(s.a)(i.a.mark((function e(a){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.post("/api/auth",a);case 3:t=e.sent,o({type:"LOGIN_OK",payload:t.data}),p(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),n={msg:e.t0.response.data.msg,cat:"alert"},o({type:"LOGIN_ERROR",payload:n});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(b.Provider,{value:{token:l.token,autenticated:l.autenticated,user:l.user,message:l.message,spinner:l.spinner,createUser:u,login:f,autenticatedUser:p,logout:function(){o({type:"LOG_OUT"})}}},e.children)},w=t(13),x=t(156),k=t(164),S=t(165),R=t(39),C=t(180),I=t(177),N=t(166),T=t(179),G=t(163),D=t(167),W=t(168),U=t(52),M=t.n(U),_=t(178),L=t(159),F=t(161),P=t(162),q=Object(x.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},image:{width:95,height:70,borderRadius:25}}})),A=function(){var e=q();return r.a.createElement(L.a,{position:"static"},r.a.createElement(F.a,null,r.a.createElement(P.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",href:"/"},r.a.createElement("img",{src:"/logo.png",className:e.image,alt:"logo"})),r.a.createElement(R.a,{variant:"h6",className:e.title},"Movies and TV shows"),r.a.createElement(G.a,{color:"inherit",href:"/signup"},"SIGN UP")))},B=Object(x.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),V=function(e){var a=B(),t=Object(n.useContext)(b),c=t.message,l=t.autenticated,o=t.login,i=t.spinner;Object(n.useEffect)((function(){l&&!i&&e.history.push("/home")}),[c,l,e.history]);var s=Object(n.useState)({email:"",password:""}),u=Object(m.a)(s,2),p=u[0],d=u[1],f=p.email,v=p.password,h=function(e){d(Object(O.a)(Object(O.a)({},p),{},Object(w.a)({},e.target.name,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,null),r.a.createElement(k.a,{component:"main",maxWidth:"xs"},r.a.createElement(S.a,null),r.a.createElement(R.a,{component:"h1",variant:"h5",align:"center"},"Search for your favorite movies and TV shows"),r.a.createElement("div",{className:a.paper},r.a.createElement(C.a,{className:a.avatar},r.a.createElement(M.a,null)),r.a.createElement(R.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:a.form,validate:"true",onSubmit:function(e){e.preventDefault(),o({email:f,password:v})}},r.a.createElement(I.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:h}),r.a.createElement(I.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:h}),r.a.createElement(N.a,{control:r.a.createElement(T.a,{value:"remember",color:"primary"}),label:"Remember me"}),c?r.a.createElement(_.a,{severity:"error"},c.msg):null,r.a.createElement(G.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Sign In"),r.a.createElement(D.a,{container:!0},r.a.createElement(D.a,{item:!0},r.a.createElement(W.a,{href:"/signup",variant:"body2"},"Don't have an account? Sign Up")))))))},J=t(58),K=t(10),Y=Object(x.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),$=function(e){var a=Y(),t=Object(n.useContext)(b),c=t.message,l=t.autenticated,o=t.createUser,i=t.spinner;Object(n.useEffect)((function(){l&&!i&&e.history.push("/home")}),[c,l,e.history]);var s=Object(n.useState)({name:"",email:"",password:"",confirm:"",error:""}),u=Object(m.a)(s,2),p=u[0],d=u[1],f=p.name,v=p.email,h=p.password,E=p.confirm,g=p.error,y=function(e){d(Object(O.a)(Object(O.a)({},p),{},Object(w.a)({},e.target.name,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,null),r.a.createElement(k.a,{component:"main",maxWidth:"xs"},r.a.createElement(S.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(C.a,{className:a.avatar},r.a.createElement(M.a,null)),r.a.createElement(R.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:a.form,validate:"true",onSubmit:function(e){e.preventDefault(),h===E?o({name:f,email:v,password:h}):d(Object(O.a)(Object(O.a)({},p),{},{error:"There is an error, passwords must be = "}))}},r.a.createElement(I.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",autoComplete:"name",autoFocus:!0,onChange:y}),r.a.createElement(I.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:y}),r.a.createElement(I.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:y}),r.a.createElement(I.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"confirm",label:"Repeat Password",type:"password",id:"confirm",onChange:y}),r.a.createElement(N.a,{control:r.a.createElement(T.a,{value:"remember",color:"primary"}),label:"Remember me"}),c?r.a.createElement(_.a,{severity:"error"},c.msg):null,g?r.a.createElement(_.a,{severity:"error"},g):null,r.a.createElement(G.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Sign Up"),r.a.createElement(D.a,{container:!0},r.a.createElement(D.a,{item:!0},r.a.createElement(W.a,{href:"/",variant:"body2"},"Do you already have an account? Sign In")))))))},z=t(54),H=t.n(z),Q=Object(x.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(w.a)({flexGrow:1},"@media (max-width:780px)",{display:"none"}),image:{width:95,height:70,borderRadius:25}}})),X=function(){var e=Q(),a=Object(n.useContext)(b).logout;return r.a.createElement(L.a,{position:"static"},r.a.createElement(F.a,null,r.a.createElement(P.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",href:"/home"},r.a.createElement("img",{src:"/logo.png",className:e.image,alt:"logo"})),r.a.createElement(R.a,{variant:"h6",className:e.title},"Movies and TV shows"),r.a.createElement(P.a,{"aria-label":"favorites",href:"/saved"},r.a.createElement(H.a,{color:"secondary"})),r.a.createElement(G.a,{color:"inherit",onClick:function(){return a()}},"LOG OUT")))},Z=t(181),ee=Object(x.a)((function(e){var a;return{root:(a={"& > *":{margin:e.spacing(2),width:"25ch"}},Object(w.a)(a,"@media (max-width:780px)",{flexDirection:"column"}),Object(w.a)(a,"margin","2rem"),Object(w.a)(a,"display","flex"),Object(w.a)(a,"flexDirection","row"),Object(w.a)(a,"alignItems","center"),Object(w.a)(a,"justifyContent","space-between"),a)}})),ae=function(){var e=Object(n.useState)({title:"",type:""}),a=Object(m.a)(e,2),t=a[0],c=a[1],l=Object(n.useContext)(f),o=l.searchMovies,i=l.saveSearch,s=function(e){c(Object(O.a)(Object(O.a)({},t),{},Object(w.a)({},e.target.name,e.target.value)))},u=ee();return r.a.createElement("form",{className:u.root,onSubmit:function(e){e.preventDefault(),o(t),i(!0)}},r.a.createElement(I.a,{name:"title",type:"text",label:"Title",placeholder:"Search by title",onChange:s,required:!0}),r.a.createElement(I.a,{name:"type",label:"Type",select:!0,onChange:s,required:!0,value:"All"},r.a.createElement(Z.a,{value:"All"},"-- All--"),r.a.createElement(Z.a,{value:"movie"},"Movies"),r.a.createElement(Z.a,{value:"series"},"TV Shows")),r.a.createElement(G.a,{variant:"contained",color:"secondary",type:"submit"},"Search"))},te=t(175),ne=t(170),re=t(171),ce=t(172),le=t(173),oe=t(174),ie=t(169),se=Object(x.a)((function(e){return{root:{maxWidth:345,margin:"auto"},media:{height:0,paddingTop:"120.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:Object(w.a)({backgroundColor:ie.a[500]},"@media (max-width:780px)",{display:"none"})}})),me=function(e){var a=e.movie,t=a.Type,c=a.Year,l=a.Title,o=a.Poster,u=a.imdbID,p=Object(n.useContext)(f).userMovies,v=Object(n.useContext)(b).user;if(v)var h=v._id;var E=se(),g=p.map((function(e){return e.imdbID})).includes(u),O=Object(n.useState)(g),y=Object(m.a)(O,2),j=y[0],w=y[1],x=function(){var e=Object(s.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.put("/api/users",{id:h,imdbID:a});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(a){return e.apply(this,arguments)}}(),k=function(){var e=Object(s.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.delete("/api/users/".concat(h),{params:{imdbID:a}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(D.a,{item:!0,xs:4},r.a.createElement(ne.a,{className:E.root},r.a.createElement(re.a,{avatar:r.a.createElement(C.a,{"aria-label":"movie",className:E.avatar},"movie"===t?r.a.createElement("p",null,"M"):r.a.createElement("p",null,"TV")),title:l,subheader:c}),r.a.createElement(ce.a,{className:E.media,image:o,title:l}),r.a.createElement(le.a,null,r.a.createElement(R.a,{variant:"body2",color:"textSecondary",component:"div"},a.Plot?r.a.createElement("p",null,a.Plot):null,a.Genre?r.a.createElement("p",null,r.a.createElement("span",null,"Genre: ")," ",a.Genre," ",r.a.createElement("br",null)):null,a.Runtime?r.a.createElement("p",null,r.a.createElement("span",null,"Duration: ")," ",a.Runtime," ",r.a.createElement("br",null)):null,a.totalSeasons?r.a.createElement("p",null," ",r.a.createElement("span",null,"Seasons: ")," ",a.totalSeasons," ",r.a.createElement("br",null)):null,a.Website?r.a.createElement("p",null,r.a.createElement("span",null,"Where to watch? "),a.Website," "):null)),r.a.createElement(oe.a,{disableSpacing:!0},r.a.createElement(P.a,{"aria-label":"add to favorites",onClick:function(){j?k(u):x(u),w(!j)}},r.a.createElement(H.a,{color:j?"secondary":"primary"})))))},ue=function(){var e=Object(n.useContext)(f),a=e.movies,t=e.spinner;return a&&!t?r.a.createElement(D.a,{container:!0,spacing:3},a.map((function(e){return r.a.createElement(me,{movie:e,key:e.imdbID})}))):r.a.createElement(r.a.Fragment,null,t?r.a.createElement(te.a,{color:"secondary"}):r.a.createElement("h1",null," We couldn't find what you were looking for"))},pe=function(e){return r.a.createElement("div",{className:"App"},r.a.createElement(X,{props:e}),r.a.createElement("div",null,r.a.createElement(ae,null)),r.a.createElement(ue,null))},de=t(82),be=function(e){var a=e.component,t=Object(de.a)(e,["component"]),c=Object(n.useContext)(b),l=c.autenticated,o=c.spinner,i=c.autenticatedUser;return Object(n.useEffect)((function(){i()}),[]),r.a.createElement(K.b,Object.assign({},t,{render:function(e){return l||o?r.a.createElement(a,e):r.a.createElement(K.a,{to:"/"})}}))},fe=function(){var e=Object(n.useContext)(f),a=e.userMovies,t=e.spinnerFav;return a.length>0&&!t?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null," Saved movies "),r.a.createElement(D.a,{container:!0,spacing:3},a.map((function(e){return r.a.createElement(me,{movie:e,key:e.imdbID})})))):r.a.createElement(r.a.Fragment,null,t?r.a.createElement(te.a,{color:"secondary"}):r.a.createElement("h1",null," You haven't saved movies yet"))},ve=function(e){return r.a.createElement("div",{className:"App"},r.a.createElement(X,{props:e}),r.a.createElement(fe,null))},he=Object(E.a)({palette:{primary:{main:"#212121"},secondary:{light:"#757ce8",main:"#ff5722"}}}),Ee=localStorage.getItem("token");Ee&&g(Ee);var ge=function(){return r.a.createElement(h.a,{theme:he},r.a.createElement(j,null,r.a.createElement(v,null,r.a.createElement(J.a,null,r.a.createElement(K.d,null,r.a.createElement(K.b,{exact:!0,path:"/",component:V}),r.a.createElement(K.b,{exact:!0,path:"/signup",component:$}),r.a.createElement(be,{exact:!0,path:"/home",component:pe}),r.a.createElement(be,{exact:!0,path:"/saved",component:ve}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},91:function(e,a,t){e.exports=t(122)},96:function(e,a,t){},97:function(e,a,t){}},[[91,1,2]]]);
//# sourceMappingURL=main.25d096e3.chunk.js.map